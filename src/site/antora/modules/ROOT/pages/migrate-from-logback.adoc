////
Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
////

:logback-link: https://logback.qos.ch/[Logback]
:slf4j-link: https://www.slf4j.org/[SLF4J]

= Migrating from Logback

{logback-link} is a logging implementation for the {slf4j-link} logging API, just like Log4j Core is a logging implementation for the xref:manual/api.adoc[Log4j API].
In this page we will guide you through migrating from Logback to Log4j Core as your logging implementation.

[TIP]
====
Instead of migrating your logging implementation, Logback, are you looking for migrating your logging API, SLF4J?
Please refer to xref:migrate-from-slf4j.adoc[].
====

.Struggling with the logging API, implementation, and bridge concepts? Click for an introduction.
[%collapsible]
====
include::partial$concepts.adoc[tag=!software-type]
====

[#migrating]
== Migrating

You either have an application using Logback at runtime, or have a library using Logback for tests.
In either case, you can replace Logback with Log4j Core as follows:

. Remove `ch.qos.logback:logback-classic` dependency

. Remove `org.apache.logging.log4j:log4j-to-slf4j` dependency, if present

. Remove `logback.xml` and `logback-test.xml` files

. Follow the instructions shared in the _"Getting started"_ page
** xref:manual/getting-started.adoc#install-app[for applications]
** xref:manual/getting-started.adoc#install-lib[for libraries]

. It is highly likely that you were routing all foreign logging APIs to Logback..
If that is the case, make sure to install the SLF4J-to-Log4j bridge explained in xref:manual/getting-started.adoc[].
+
In order to forward all foreign APIs **directly** to Log4j API, you can use the cheat shee below.
+
.Dependency migration cheat sheet
[cols="1,1"]
|===
| If dependency present | replace with

| `https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-to-slf4j[org.apache.logging.log4j:log4j-to-slf4j]`
| `https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-slf4j2-impl[org.apache.logging.log4j:log4j-slf4j2-impl]`

| `https://central.sonatype.com/artifact/org.slf4j/jcl-over-slf4j[org.slf4j:jcl-over-slf4j]`
| `https://central.sonatype.com/artifact/commons-logging/commons-logging[commons-logging:commons-logging]` version 1.3.0 or later

| `https://central.sonatype.com/artifact/org.slf4j/jul-to-slf4j[org.slf4j:jul-to-slf4j]`
| `https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-jul[org.apache.logging.log4j:log4j-jul]`

| `https://central.sonatype.com/artifact/org.slf4j/log4j-over-slf4j[org.slf4j:log4j-over-slf4j]`
| `https://central.sonatype.com/artifact/org.apache.logging.log4j/log4j-1.2-api[org.apache.logging.log4j:log4j-1.2-api]`

| `https://central.sonatype.com/artifact/org.springframework.boot/spring-boot-starter-logging[org.springframework:spring-boot-starter-logging]`
| `https://central.sonatype.com/artifact/org.springframework.boot/spring-boot-starter-log4j2[org.springframework:spring-boot-starter-log4j2]`
|===

It might not always be trivial to match the contents of the newly created `log4j2.xml` and `log4j2-test.xml` files with your old `logback.xml` and `logback-test.xml` files.
While all Logback components have corresponding equivalents in Log4j Core, they might not be sharing the same name or configuration.
To assist with migrating Logback configuration components to Log4j Core, see the following pages:

* xref:manual/appenders.adoc[]
* xref:manual/layouts.adoc[]
* xref:manual/filters.adoc[]

For the complete list of all Log4j configuration knobs, see xref:manual/configuration.adoc[the Configuration page].
